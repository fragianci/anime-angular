import{A as te,q as J,r as v,t as G,u as I,v as K,w as Q,x as Z,y as ee}from"./chunk-QT3OGRSV.js";import{A as p,Aa as U,B as h,Ba as E,Ca as M,F as k,G as B,Ga as z,H as a,I as f,O as w,Oa as W,Pa as $,Q as l,Ra as x,S as Y,T as o,U as r,Ua as q,V as g,Y as b,Z as c,_ as d,c as D,fa as m,ga as u,ha as T,k as P,l as j,m as y,na as F,oa as N,pa as S,q as L,qa as X,ra as V,sa as H,v as C,w as O,ya as R}from"./chunk-NTF7O24V.js";var de=(t,_)=>({"justify-content-center":t,"justify-content-between":_}),pe=t=>({withVideo:t});function he(t,_){if(t&1&&g(0,"iframe",9),t&2){let e=d();l("src",e.videoUrl,B)}}function fe(t,_){if(t&1){let e=b();o(0,"div",10),c("click",function(){let i=p(e).$implicit,s=d();return h(s.openAnimeRecommendation(i))}),g(1,"img",11),o(2,"span",12),m(3),S(4,"truncate"),r()()}if(t&2){let e=_.$implicit;a(),l("src",e.images.jpg.imageUrl,k),a(2),u(H(4,2,e.title,50,!0))}}var re=(()=>{class t{constructor(e,n,i,s){this.animeService=e,this.route=n,this.sanitizer=i,this.router=s,this.id=0,this.anime=new J,this.recommendedAnime=[],this.animeEntries=[]}ngOnInit(){this.getAnimeDetail(),this.getRecommendedAnime()}getAnimeDetailNoObservable(){console.log(this.route.snapshot.queryParamMap.get("id"))}getAnimeDetail(){this.getParams().pipe(P(()=>this.animeService.getAnimeDetail$(this.id)),y(e=>{this.anime=e,e.trailer.embedUrl?this.videoUrl=this.sanitizer.bypassSecurityTrustResourceUrl(e.trailer.embedUrl):this.videoUrl=void 0})).subscribe({error:e=>{console.error(e)}})}getParams(){return this.route.paramMap.pipe(y(e=>{console.log(e),this.id=Number(e.get("id"))}))}getRecommendedAnime(){this.animeService.getRecommendedAnime().subscribe({next:e=>{this.recommendedAnime=e,this.animeEntries=this.recommendedAnime.flatMap(n=>n.entries)},error:e=>{console.error(e)}})}openAnimeRecommendation(e){console.log(e),this.router.navigate(["private/home",{outlets:{details:["anime",e.id]}}])}close(){this.router.navigate(["private"])}static{this.\u0275fac=function(n){return new(n||t)(f(v),f($),f(W),f(x))}}static{this.\u0275cmp=C({type:t,selectors:[["anime-detail"]],decls:15,vars:12,consts:[[1,"d-flex","justify-content-between"],[1,"closeIcon",3,"click"],[1,"bi","bi-x"],[1,"w-100","d-flex","mt-3",3,"ngClass"],["frameborder","0","width","560","height","315","allowfullscreen","",3,"src",4,"ngIf"],["alt","",1,"animeImage",3,"src","ngClass"],[1,"mt-3"],[1,"d-flex","overflow-auto","animeListContainer"],["class","d-flex flex-column align-items-center mx-2 animeItem","style","height: 150px",3,"click",4,"ngFor","ngForOf"],["frameborder","0","width","560","height","315","allowfullscreen","",3,"src"],[1,"d-flex","flex-column","align-items-center","mx-2","animeItem",2,"height","150px",3,"click"],["alt","",1,"animeThumbnail",2,"width","100px",3,"src"],[1,"mt-2","text-center",2,"font-size","12px"]],template:function(n,i){if(n&1&&(o(0,"div",0)(1,"h3"),m(2),r(),o(3,"div",1),c("click",function(){return i.close()}),g(4,"i",2),r()(),o(5,"div",3),w(6,he,1,1,"iframe",4),g(7,"img",5),r(),o(8,"p",6),m(9),r(),o(10,"div",6)(11,"h4"),m(12,"Anime consigliati"),r(),o(13,"div",7),w(14,fe,5,6,"div",8),r()()),n&2){let s;a(2),T(" ",(s=i.anime.titleEnglish)!==null&&s!==void 0?s:i.anime==null?null:i.anime.title," "),a(3),l("ngClass",N(7,de,!i.videoUrl,i.videoUrl)),a(),l("ngIf",i.videoUrl),a(),l("src",i.anime.images.jpg.largeImageUrl,k)("ngClass",F(10,pe,i.videoUrl)),a(2),T(" ",i.anime.background&&i.anime.background!==""?i.anime.background:"Nessuna descrizione disponibile",`
`),a(5),l("ngForOf",i.animeEntries)}},dependencies:[U,E,M,I],styles:[".animeImage[_ngcontent-%COMP%]{height:500px}.animeImage.withVideo[_ngcontent-%COMP%]{height:240px}.animeListContainer[_ngcontent-%COMP%]   .animeItem[_ngcontent-%COMP%]{cursor:pointer}.animeListContainer[_ngcontent-%COMP%]   .animeItem[_ngcontent-%COMP%]   .animeThumbnail[_ngcontent-%COMP%]{width:100px;height:60px;object-fit:cover;border-radius:8px}.closeIcon[_ngcontent-%COMP%]{cursor:pointer;font-size:30px}"]})}}return t})();function ge(t,_){if(t&1){let e=b();o(0,"tr")(1,"td",3),c("click",function(){let i=p(e).$implicit,s=d();return h(s.openAnime(i))}),m(2),r(),o(3,"td",3),c("click",function(){let i=p(e).$implicit,s=d();return h(s.openAnime(i))}),m(4),S(5,"truncate"),r(),o(6,"td",3),c("click",function(){let i=p(e).$implicit,s=d();return h(s.openAnime(i))}),m(7),r(),o(8,"td",3),c("click",function(){let i=p(e).$implicit,s=d();return h(s.openAnime(i))}),m(9),r(),o(10,"td",3),c("click",function(){let i=p(e).$implicit,s=d();return h(s.openAnime(i))}),m(11),r(),o(12,"td",3),c("click",function(){let i=p(e).$implicit,s=d();return h(s.openAnime(i))}),m(13),S(14,"date"),r(),o(15,"td",3),c("click",function(){let i=p(e).$implicit,s=d();return h(s.openAnime(i))}),m(16),S(17,"date"),r(),o(18,"td")(19,"anime-like",4),c("likeEmitter",function(){let i=p(e).$implicit,s=d();return h(s.like(i))}),m(20," Like "),r()(),o(21,"td")(22,"anime-like",5),m(23," Dislike "),r()()()}if(t&2){let e=_.$implicit;a(2),u(e.id),a(2),u(X(5,8,e.titleEnglish)),a(3),u(e.titleJapanese),a(2),u(e.score),a(2),u(e.duration),a(2),u(V(14,10,e.aired.from,"dd-MM-yyyy")),a(3),u(V(17,13,e.aired.to,"dd-MM-yyyy")),a(6),l("isPrimary",!1)}}var se=(()=>{class t{constructor(e,n){this.animeService=e,this.router=n,this.animeList=[],this.shadowOffsetX=20,this.shadowOffsetY=20,this.shadowBlur=20,this.data=new Date}ngOnInit(){this.animeList.forEach(e=>{this.animeService.getAnimeDetail$(e.id).pipe(j(500)).subscribe(n=>{console.log("anime: ",n)})})}openAnime(e){this.router.navigate(["private/home",{outlets:{details:["anime",e.id]}}])}like(e){this.animeService.addAnimeLiked(e),console.log(this.animeService.getAnimeLiked())}static{this.\u0275fac=function(n){return new(n||t)(f(v),f(x))}}static{this.\u0275cmp=C({type:t,selectors:[["anime-list"]],inputs:{animeList:"animeList",shadowOffsetX:"shadowOffsetX",shadowOffsetY:"shadowOffsetY",shadowBlur:"shadowBlur"},decls:21,vars:4,consts:[["animeCustomShadow","","shadowColor","rgba(0, 0, 255, 0.5)",1,"table","mt-2",3,"shadowOffsetX","shadowOffsetY","shadowBlur"],["scope","col"],[4,"ngFor","ngForOf"],[3,"click"],[3,"likeEmitter"],[3,"isPrimary"]],template:function(n,i){n&1&&(o(0,"table",0)(1,"thead")(2,"tr")(3,"th",1),m(4,"Id"),r(),o(5,"th",1),m(6,"Title"),r(),o(7,"th",1),m(8,"Original title"),r(),o(9,"th",1),m(10,"Score"),r(),o(11,"th",1),m(12,"Duration"),r(),o(13,"th",1),m(14,"Aired from"),r(),o(15,"th",1),m(16,"To"),r(),g(17,"th",1)(18,"th",1),r()(),o(19,"tbody"),w(20,ge,24,16,"tr",2),r()()),n&2&&(l("shadowOffsetX",i.shadowOffsetX)("shadowOffsetY",i.shadowOffsetY)("shadowBlur",i.shadowBlur),a(20),l("ngForOf",i.animeList))},dependencies:[G,ee,E,z,I],styles:["tr[_ngcontent-%COMP%]{cursor:pointer}"]})}}return t})();function _e(t,_){t&1&&(o(0,"div",3),g(1,"anime-spinner"),r())}function we(t,_){if(t&1&&(o(0,"div",5),g(1,"anime-list",6),r()),t&2){let e=d();a(),l("shadowOffsetX",e.shadowSettings.offsetX)("shadowOffsetY",e.shadowSettings.offsetY)("shadowBlur",e.shadowSettings.blur)("animeList",e.filteredAnimeList)}}function Ce(t,_){t&1&&g(0,"anime-random-character")}var ae=(()=>{class t{get characterSignal(){return this.animeService.getCharacterSignal()}constructor(e,n){this.animeService=e,this.router=n,this.filteredAnimeList=[],this.isLoading=!0,this.animeList=[],this.shadowSettings={offsetX:10,offsetY:10,blur:10},this.subscription=new D,this.character={},console.log("HomeComponent"),this.getCharacter()}ngOnDestroy(){this.subscription.unsubscribe()}ngOnInit(){this.getAnimeListHttp()}getAnimeListHttp(){this.animeService.getAnimeListHttp$().pipe(y(e=>{this.animeList=e,this.filteredAnimeList=this.animeList,this.isLoading=!1})).subscribe({error:e=>{console.error(e)}})}getPromiseAnimeList(){this.animeService.getListPromise().then(e=>{console.log(e),this.animeList=e,this.filteredAnimeList=this.animeList}).catch(e=>{console.error(e)}).finally(()=>{console.log("Operazione completata!")})}getObservableFakeList(){this.animeService.getFakeListObservable().subscribe({next:e=>{this.animeList=e,this.filteredAnimeList=this.animeList},error:e=>{console.error(e)},complete:()=>{console.log("Completato")}})}getAnimeHttpPromise(){this.animeService.getAnimeListAjax().then(e=>{console.log(e),this.animeList=e,this.filteredAnimeList=this.animeList}).catch(e=>{console.error(e)})}getSearch(e){console.log(e),this.filteredAnimeList=this.animeService.filterAnimeList(this.animeList,e)}getShadowSettings(e){this.shadowSettings=e}getCharacter(){R(()=>{this.character=this.characterSignal(),console.log("character",this.character)})}static{this.\u0275fac=function(n){return new(n||t)(f(v),f(x))}}static{this.\u0275cmp=C({type:t,selectors:[["anime-home"]],decls:6,vars:2,consts:[[1,"mt-5"],[3,"searchTextEmitter"],[1,"d-flex","justify-content-center"],[1,"flex-grow-1","d-flex","justify-content-center","align-items-center"],[4,"ngIf"],[1,"flex-grow-1","d-none","d-md-block"],[3,"shadowOffsetX","shadowOffsetY","shadowBlur","animeList"]],template:function(n,i){n&1&&(o(0,"div",0)(1,"anime-searchbar",1),c("searchTextEmitter",function(le){return i.getSearch(le)}),r(),o(2,"div",2),w(3,_e,2,0,"div",3)(4,we,2,4)(5,Ce,1,0,"anime-random-character",4),r()()),n&2&&(a(3),Y(3,i.isLoading?3:4),a(2),l("ngIf",i.character.mal_id))},dependencies:[Q,K,Z,M,se]})}}return t})();var Se=[{path:"",component:ae},{path:"anime/:id",component:re,outlet:"details"}],me=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=O({type:t})}static{this.\u0275inj=L({imports:[q.forChild(Se)]})}}return t})();var Ge=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=O({type:t})}static{this.\u0275inj=L({imports:[te,me]})}}return t})();export{Ge as HomeModule};
